<% layout("/layouts/dashboard") %>
<style>
  .list-group-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .item-info {
    flex-grow: 1;
  }
  .shopping-header {
    background-color: #f8f9fa;
    padding: 1.5rem;
    border-radius: 0.5rem;
    box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    margin-bottom: 1.5rem;
  }
  .item-actions {
    display: flex;
    gap: 0.5rem;
  }
  .card {
    box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.1);
  }
  .badge {
    font-size: 0.85rem;
  }
  .empty-list {
    text-align: center;
    padding: 2rem;
    background-color: #f8f9fa;
    border-radius: 0.5rem;
  }
</style>

<div class="container mt-4 mb-5">
  <div
    class="shopping-header d-flex justify-content-between align-items-center"
  >
    <div>
      <h2 class="mb-0">
        <i class="fas fa-shopping-basket me-2"></i>Shopping List
      </h2>
      <p class="text-muted mb-0 mt-1">Items you need to buy</p>
    </div>
  </div>

  <div class="card">
    <div
      class="card-header bg-white d-flex justify-content-between align-items-center"
    >
      <div>
        <h5 class="mb-0">Missing Ingredients</h5>
        <small class="text-muted">
          <% if (missingIngredients.length > 0) { %> <%=
          missingIngredients.length %> <%= missingIngredients.length === 1 ?
          'item' : 'items' %> to buy <% } else { %> No items to buy <% } %>
        </small>
      </div>
    </div>

    <div class="card-body p-0">
      <% if (missingIngredients.length > 0) { %>
      <ul class="list-group list-group-flush">
        <% for (let item of missingIngredients) { %>
        <li class="list-group-item">
          <div class="item-info">
            <div class="d-flex align-items-center mb-1">
              <strong><%= item.name %></strong>
              <% if (item.category) { %>
              <span class="badge bg-light text-dark ms-2"
                ><%= item.category %></span
              >
              <% } %>
            </div>
            <div class="text-muted"><%= item.amount %> <%= item.unit %></div>
          </div>
        </li>
        <% } %>
      </ul>
      <% } else { %>
      <div class="empty-list">
        <i class="fas fa-check-circle text-success fa-4x mb-3"></i>
        <h4>All set!</h4>
        <p class="text-muted">You have everything you need for your recipes.</p>
        <a href="#" class="btn btn-success mt-2">Explore Recipes</a>
      </div>
      <% } %>
    </div>
  </div>
</div>
